(()=>{"use strict";function e(e){e.classList.add("popup_opened"),document.addEventListener("keydown",n)}function t(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",n)}function n(e){"Escape"===e.key&&t(document.querySelector(".popup_opened"))}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o,c=function(){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.link=n,this.templateSelector=r,this.createCard()}var n,o;return n=t,(o=[{key:"createCard",value:function(){var e=document.querySelector(this.templateSelector).content.querySelector(".element").cloneNode(!0),t=document.querySelector(".popup_img"),n=e.querySelector(".element__photo"),r=t.querySelector(".popup__image-url");e.querySelector(".element__title").textContent=this.name,n.src=this.link,n.alt=this.name,this.cardElement=e,this.setEventListener(e,n,r,t)}},{key:"setEventListener",value:function(t,n,r,o){var c=this;t.querySelector(".element__delete").addEventListener("click",(function(e){e.target.closest(".element").remove()})),n.addEventListener("click",(function(){e(o),r.src=c.link,r.alt=c.name,o.querySelector(".popup__image-name").textContent=c.name})),t.querySelector(".element__smiley").addEventListener("click",(function(e){e.target.classList.toggle("element__smiley_black")}))}}])&&r(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),t}(),u=document.querySelector(".popup__form_card"),a=document.querySelector(".profile__info-name"),l=document.querySelector(".popup__input_str_name"),p=document.querySelector(".profile__info-lob"),i=document.querySelector(".popup__input_str_jop"),s=document.querySelector(".popup_card"),d=document.querySelector(".popup_profile"),m=document.querySelector(".popup__form"),_=document.querySelector(".profile__edit"),f=document.querySelector(".profile__add-button"),v=u.querySelector(".popup__input_name"),y=u.querySelector(".popup__input_url"),S=document.querySelector(".elements"),h=document.querySelectorAll(".popup__close-min"),q=document.querySelector("#popup__button_card"),k=document.querySelector("#popup__button_profile"),b=document.querySelector(".profile__content"),E=document.querySelector("#popup_avatar");function L(e){switch(t(e),e.dataset.type){case"profile":k.classList.add("popup__button-disabled"),k.setAttribute("disabled",!0);break;case"card":q.classList.add("popup__button-disabled"),q.setAttribute("disabled",!0),u.reset()}}function g(e,t){return new c(t,e,"#element").cardElement}h.forEach((function(e){e.addEventListener("click",(function(){return L(e.closest(".popup"))}))})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){var t=g(e.link,e.name);S.append(t)})),o={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button-disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_execute",spanError:"-error"},document.querySelectorAll(o.formSelector).forEach((function(e){var t,n;n=o,(t=e).addEventListener("input",(function(){var e=!t.checkValidity(),r=t.querySelector(n.submitButtonSelector);r.disabled=e,r.classList.toggle(n.inactiveButtonClass,e)})),t.querySelectorAll(n.inputSelector).forEach((function(e){e.addEventListener("input",(function(){if(e.validity.valid){var t=document.querySelector("#"+e.id+n.spanError);t.textContent="",t.classList.remove(n.errorClass),t.textContent=""}else{var r=e.validationMessage;e.validity.patternMismatch&&(r=e.dataset.error);var o=document.querySelector("#"+e.id+n.spanError);o.classList.add(n.errorClass),o.textContent=r}}))}))})),Array.from(document.querySelectorAll(".popup")).forEach((function(e){e.addEventListener("mousedown",(function(t){t.target.classList.contains("popup_opened")&&L(e)}))})),u.addEventListener("submit",(function(e){return t=s,e.preventDefault(),void(v.value.length>0&&y.value.length>0&&(S.prepend(g(y.value,v.value)),L(t)));var t})),m.addEventListener("submit",(function(e){return t=d,e.preventDefault(),a.textContent=l.value,p.textContent=i.value,void L(t);var t})),_.addEventListener("click",(function(){l.value=a.textContent,i.value=p.textContent,e(d)})),f.addEventListener("click",(function(){return e(s)})),b.addEventListener("click",(function(){return e(E)}))})();